"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createProxy = createProxy;
const index_1 = require("./index");
function createProxy({ json, resolveApiKey = index_1.resolveApiKeyFromEnv, }) {
    const proxy = async ({ request, }) => {
        const responseHeaders = new Headers();
        return (0, index_1.handleRequest)({
            id: "remix",
            method: request.method,
            respondWith: (status, data) => json(data, { status, headers: responseHeaders }),
            getHeaders: () => (0, index_1.fromHeaders)(request.headers),
            getHeader: (name) => request.headers.get(name),
            sendHeader: (name, value) => responseHeaders.set(name, value),
            getRequestBody: async () => JSON.stringify(await request.json()),
            sendResponse: index_1.responsePassthrough,
            resolveApiKey,
        });
    };
    return {
        action: proxy,
        loader: proxy,
    };
}
//# sourceMappingURL=remix.js.map